# 高程笔记

本文是我看JavaScript高级程序设计（第三版），为督促学习和梳理自己的知识结构记下来的一些要点、知识点 or 概念。随着看书的进度不定时更新。

## 第一章 JavaScript简介

#### DOM

文档对象模型是针对 XML 但经过扩展用于 HTML 的应用程序编程接口。DOM 把整个页面映射为一个多层节点结构。HTML 或 XML 页面中的每个组成部分都是某种类型的节点，这些节点又包含不同类型的数据。

#### BOM

浏览器对象模型。从根本上讲，BOM只处理浏览器窗口和框架。但人们习惯上把所有针对浏览器的JavaScript扩展算作BOM的一部分。下面就是一些这样的扩展：

- 弹出新浏览器窗口的功能；
- 移动、缩放和关闭浏览器窗口的功能；
- 提供浏览器详细信息的 navigator 对象；
- 提供浏览器所加载页面的详细信息的 location 对象；
- 提供用户显示器分辨率详细信息的 screen 对象；
- 对 cookies 的支持；
- 像 XMLHttpRequest 和 IE 的 ActiveXObject 这样的自定义对象

## 第二章 在HTML中使用JavaScript

在使用`<script>`嵌入JavaScript代码是，记住不要在代码中的任何地方出现 `"</script>"` 字符串。因为按照解析嵌入式代码的规则，当浏览器遇到字符串`"</script>"` 时，就会认为那是结束的`</script>`标签。

主要注意的是，带有`src` 属性的 `<script>` 元素不应该在其`<script>` 和 `</script>` 标签之间再包含额外的JavaScript代码。如果包含了嵌入的代码，则只会下载并执行外部脚本文件，嵌入的代码会被忽略。

##### `<script>` 标签的 `defer` 属性

这个属性的用途是表明脚本在执行时不会影响页面的构造。也就是说，脚本会延迟到整个页面解析完毕后再运行。因此，在 `<script>` 元素中设置 `defer` 属性，相当于告诉浏览器立即下载，但延迟执行。

##### `<script>` 标签的 `async` 属性

`async` 属性与 `defer` 属性类似，都用于改变处理脚本的行为，`async` 只适用于外部脚本文件，并告诉浏览器立即下载文件。但与 `defer` 不同的是，标记为 `async` 的脚本并不保证按照指定它们的先后顺序执行。指定 `async` 属性的目的是不让页面等待脚本下载和执行，从而异步加载页面其他内容。为此，建议异步脚本不要在加载期间修改DOM。

## 第三章 基本概念 

##### 变量的一些说明：

用 `var` 操作符定义的变量将成为定义该变量的作用域中的局部变量。如果省略var 操作符，在局部作用域内创建一个变量，这个变量将成为全局变量：

```
function test() {
  message = 'hi';
}
test();
alert(message);
```

这样，只要调用过一次 `test()` 函数，这个变量就有了定义，就可以在函数外部的任何地方被访问到。

> 虽然省略 `var` 操作符可以定义全局变量，但这也不是我们推荐的做法。因为在局部作用中定义的全局变量很难维护，而且如果有意地忽略了 `var` 操作符，也会由于相应变量不会马上就有定义而导致不必要的混乱。给未经声明的变量赋值在严格模式下会导致 `ReferenceError` 错误。 



##### Null 和 undefined

```
var message;
// var age
alert(typeof message); // "undefined"
alert(typeof age); // "undefined"
```

对于未初始化和未声明的变量执行 `typeof` 操作符都返回了 `undefined` 。

Null 表示一个空指针对象，使用typeof 操作符检测null值时会返回”object“

```
var car = null;
alert(typeof call); // "Object"
```



##### Boolean

虽然Boolean类型的字面值只有两个，但ECMAScript 中所有类型的值都有与这两个Boolean值等价的值。要将一个值转换为其对应的Boolean值，可以调用转型函数 Boolean()。



##### 浮点数

所谓浮点数值，就是该数值中必须包含一个小数点，并且小数点后面必须至少有一位数字。虽然小数点前面可以没有整数，但并不推荐这种写法。



```
var floatNum = .1; // 有效，但不推荐
```

由于保存浮点数值需要的内存空间是保存整数值的两倍，因此ECMAScript 会不失时机地将浮点数值转换为整数值。

浮点数值的最高精度是17位小数，但在进行算术计算时其精确度远远不如整数。例如 0.1 +  0.2 ≠ 0.3，而是0.30000000000000004。这个小小的舍入误差会导致无法测试特定的浮点数值。例如：

```
if (a + b === 0.3) {
  alert('You got 0.3')
}
```

如果这两个数是 0.05 和 0.25，或者是0.15和0.15都不会有问题。而如前面所述，如果这两个数是0.1和0.2，那么测试将无法通过。因此，永远不要测试某个特定浮点数的值。



##### NaN

NaN ，即非数值（Not a Number）是一个特殊的数值，这个数值用于表示一个本来要返回数值的操作数未返回数值的情况（这样就不会抛出错误了）。任何涉及NaN的操作都会返回NaN。其次，NaN与任何值都不相等，包括NaN自身。



#### 赋值表达式

赋值运算符（**assignment operator**）基于右值（right operand）的值，给左值（left operand）赋值。右值、左值和赋值运算符（即`=`号）共同组成赋值表达式。**其中，赋值表达式的返回值为右值的值。**

``````
var x;
var y = 10;
var z = 15;

console.log(x = y); //expected output: 10
console.log(x); //expected output: 10
console.log(x = y = z); //expected output: 15
``````

